{"version":3,"sources":["js/gallery-modal.js"],"names":["refs","openModalImg","document","querySelectorAll","openModalList","querySelector","modal","modalImage","htmlAndBody","toggleModal","isModalOpen","getAttribute","setAttribute","classList","toggle","isFocused","focusLog","targetElem","setTimeout","focus","activeElement","console","log","className","closeModal","addEventListener","event","currentTarget","contains","openModal","focusTarget","which","key","target","matches"],"mappings":";AAAA,MACQA,MAAAA,EAAO,CACXC,aAAcC,SAASC,iBAAiB,sBACxCC,cAAeF,SAASG,cAAc,sBACtCC,MAAOJ,SAASG,cAAc,wBAC9BE,WAAYL,SAASC,iBAAiB,wBACtCK,YAAaN,SAASC,iBAAiB,qBAGhCM,SAAAA,IACDC,MAAAA,EAAmE,SAArDV,EAAKI,cAAcO,aAAa,mBAA+B,EACnFX,EAAKI,cAAcQ,aAAa,iBAAkBF,GAElDV,EAAKM,MAAMO,UAAUC,OAAO,aAE5Bd,EAAKQ,YAAY,GAAGK,UAAUC,OAAO,aACrCd,EAAKQ,YAAY,GAAGK,UAAUC,OAAO,aAGnCC,IAAAA,EAAY,EACPC,SAAAA,EAASC,EAAajB,EAAKI,eAElCc,WAAW,KACTD,EAAWE,QACXJ,EAAYb,SAASkB,gBAAkBH,EACvCI,QAAQC,OAAOL,EAAWM,wBAAwBR,MACjD,KAOIS,SAAAA,IACPf,IAAeO,IAIjBhB,EAAKI,cAAcqB,iBAAiB,QAASC,IACvCA,EAAMC,eAAiB3B,EAAKI,eAC9BiB,QAAQC,IAAI,yBAEdtB,EAAKM,MAAMO,UAAUe,SAAS,cAbvBC,SAAUC,EAAc9B,EAAKM,OACpCG,IAAeO,EAASc,GAYsBD,KAGhD7B,EAAKM,MAAMmB,iBAAiB,QAASC,KAClB,KAAhBA,EAAMK,OAA8B,WAAdL,EAAMM,OAC1BhC,EAAKM,MAAMO,UAAUe,SAAS,cAC/BJ,MAGJxB,EAAKM,MAAMmB,iBAAiB,YAAaC,IACvCA,EAAMO,OAAOC,QAAQ,yBAA2BV,OApDpD","file":"gallery-modal.e156d87a.js","sourceRoot":"../src","sourcesContent":["(() => {\n  const refs = {\n    openModalImg: document.querySelectorAll('[data-photos-lazy]'),\n    openModalList: document.querySelector('[data-photos-list]'),\n    modal: document.querySelector('[data-gallery-modal]'),\n    modalImage: document.querySelectorAll('[data-gallery-image]'),\n    htmlAndBody: document.querySelectorAll('[data-no-scroll]'),\n  };\n\n  function toggleModal() {\n    const isModalOpen = refs.openModalList.getAttribute('aria-expanded') === 'true' || false;\n    refs.openModalList.setAttribute('aria-expanded', !isModalOpen);\n\n    refs.modal.classList.toggle('is-hidden'); // MUST HAVE\n\n    refs.htmlAndBody[0].classList.toggle('no-scroll');\n    refs.htmlAndBody[1].classList.toggle('no-scroll');\n  }\n\n  var isFocused = 0;\n  function focusLog(targetElem = refs.openModalList) {\n    /* Чарівництво */\n    setTimeout(() => {\n      targetElem.focus();\n      isFocused = document.activeElement === targetElem;\n      console.log(`${targetElem.className} isFocused: ${isFocused}`);\n    }, 250);\n  }\n\n  function openModal(focusTarget = refs.modal) {\n    toggleModal(), focusLog(focusTarget);\n  }\n\n  function closeModal() {\n    toggleModal(), focusLog();\n  }\n  // по event.target будет картинка а срабатывание произойдет на event.currentTarget\n  // Сделать проверку if(event.target !== img) {return}\n  refs.openModalList.addEventListener('click', event => {\n    if (event.currentTarget == refs.openModalList) {\n      console.log('list is clicked upon ');\n    }\n    refs.modal.classList.contains('is-hidden') && openModal();\n  });\n\n  refs.modal.addEventListener('keyup', event => {\n    (event.which === 27 || event.key === 'Escape') &&\n      !refs.modal.classList.contains('is-hidden') &&\n      closeModal();\n  });\n\n  refs.modal.addEventListener('mousedown', event => {\n    event.target.matches('[data-gallery-modal]') && closeModal();\n  });\n})();\n"]}