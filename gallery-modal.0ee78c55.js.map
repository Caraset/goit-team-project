{"version":3,"sources":["js/gallery-modal.js"],"names":["refs","openModalImg","document","querySelectorAll","openModalList","querySelector","modal","modalNextBtn","htmlAndBody","toggleModal","isModalOpen","getAttribute","setAttribute","classList","toggle","focusLog","targetElem","setTimeout","focus","activeElement","closeModal","addEventListener","event","currentTarget","contains","openModal","targetOnOpen","which","key","target","matches"],"mappings":";AAAA,MACQA,MAAAA,EAAO,CACXC,aAAcC,SAASC,iBAAiB,sBACxCC,cAAeF,SAASG,cAAc,sBACtCC,MAAOJ,SAASG,cAAc,wBAC9BE,aAAcL,SAASG,cAAc,uBACrCG,YAAaN,SAASC,iBAAiB,qBAGhCM,SAAAA,IACDC,MAAAA,EAAmE,SAArDV,EAAKI,cAAcO,aAAa,mBAA+B,EACnFX,EAAKI,cAAcQ,aAAa,iBAAkBF,GAChDV,EAAKM,MAAMO,UAAUC,OAAO,aAC5Bd,EAAKQ,YAAY,GAAGK,UAAUC,OAAO,aACrCd,EAAKQ,YAAY,GAAGK,UAAUC,OAAO,aAIhCC,SAAAA,EAASC,GAEhBC,WAAW,KACS,MAAdD,IAGFA,EAAWE,QACChB,SAASiB,gBAAkBH,IAExC,KAOII,SAAAA,IACPX,IAAeM,IAIjBf,EAAKI,cAAciB,iBAAiB,QAASC,IACvCA,EAAMC,cAAiBvB,EAAKI,cAEhCJ,EAAKM,MAAMO,UAAUW,SAAS,cAZvBC,SAAUC,EAAe1B,EAAKO,cACrCE,IAAeM,EAASW,GAWsBD,KAGhDzB,EAAKM,MAAMe,iBAAiB,QAASC,KAClB,KAAhBA,EAAMK,OAA8B,WAAdL,EAAMM,OAC1B5B,EAAKM,MAAMO,UAAUW,SAAS,cAC/BJ,MAGJpB,EAAKM,MAAMe,iBAAiB,YAAaC,IACvCA,EAAMO,OAAOC,QAAQ,yBAA2BV,OApDpD","file":"gallery-modal.0ee78c55.js","sourceRoot":"../src","sourcesContent":["(() => {\n  const refs = {\n    openModalImg: document.querySelectorAll('[data-photos-lazy]'),\n    openModalList: document.querySelector('[data-photos-list]'),\n    modal: document.querySelector('[data-gallery-modal]'),\n    modalNextBtn: document.querySelector('[data-gallery-next]'),\n    htmlAndBody: document.querySelectorAll('[data-no-scroll]'),\n  };\n\n  function toggleModal() {\n    const isModalOpen = refs.openModalList.getAttribute('aria-expanded') === 'true' || false;\n    refs.openModalList.setAttribute('aria-expanded', !isModalOpen),\n      refs.modal.classList.toggle('is-hidden'), // MUST HAVE\n      refs.htmlAndBody[0].classList.toggle('no-scroll'),\n      refs.htmlAndBody[1].classList.toggle('no-scroll');\n  }\n\n  var isFocused = 0;\n  function focusLog(targetElem) {\n    // Чарівництво\n    setTimeout(() => {\n      if (targetElem == null) {\n        return;\n      } else {\n        targetElem.focus();\n        isFocused = document.activeElement === targetElem;\n      }\n    }, 250);\n  }\n\n  function openModal(targetOnOpen = refs.modalNextBtn) {\n    toggleModal(), focusLog(targetOnOpen);\n  }\n\n  function closeModal() {\n    toggleModal(), focusLog();\n  }\n  // по event.target будет картинка а срабатывание произойдет на event.currentTarget\n  // Сделать проверку if(event.target !== img) {return}\n  refs.openModalList.addEventListener('click', event => {\n    if (event.currentTarget == refs.openModalList) {\n    }\n    refs.modal.classList.contains('is-hidden') && openModal();\n  });\n\n  refs.modal.addEventListener('keyup', event => {\n    (event.which === 27 || event.key === 'Escape') &&\n      !refs.modal.classList.contains('is-hidden') &&\n      closeModal();\n  });\n\n  refs.modal.addEventListener('mousedown', event => {\n    event.target.matches('[data-gallery-modal]') && closeModal();\n  });\n})();\n"]}